---
import Badge from "../components/Badge.astro";
import Layout from "../layouts/Layout.astro";
import SectionContainer from "../components/SectionContainer.astro";
import ContactForm from "../components/ContactForm.astro";
import Projects from "../components/Projects.astro";
import AboutMe from "../components/AboutMe.astro";
import GitHubIcon from "../components/icons/github.astro";
import LinkedinIcon from "../components/icons/linkedin.astro";
import MailIcon from "../components/icons/mail.astro";
import SocialPill from "../components/SocialPill.astro";
import CodeIcon from "../components/icons/code.astro";
import CopyIcon from "../components/icons/copy.astro";
import AboutIcon from "../components/icons/about.astro";

// Welcome to Astro! Wondering what to do next? Check out the Astro documentation at https://docs.astro.build
// Don't want to use any of this? Delete everything in this file, the `assets`, `components`, and `layouts` directories, and start fresh.
---

<Layout
  title=" Porfolio de Fabrizio Contu - Programador y Desarrollador FrontEnd"
>
  <main class="px-4">
    <SectionContainer id="top" aria-label="top" class="py-16 md:py-36">
      <img
        class="rounded-full size-20 mb-5 mt-24 dark:border-2 dark:border-teal-400"
        src="https://media.licdn.com/dms/image/v2/D4D03AQF4o1nMQn6bgg/profile-displayphoto-shrink_200_200/profile-displayphoto-shrink_200_200/0/1725363670807?e=2147483647&v=beta&t=n_5LMbIveQskK0RyZC9utJMDw3yCPdRba4TJ8YIqUOA"
        alt="Foto de perfil de Fabrizio Contu"
      />
      <h1
        class="text-2xl md:text-3xl lg:text-4xl dark:text-white font-bold flex flex-row gap-x-4 pb-4"
      >
        Ciao, soy Fabrizio <a
          href="https://github.com/FabrizioContu"
          target="_blank"
          rel="noopener"
          class="flex pt-1 items-center hover:scale-105 transition"
        >
          <Badge>Listo para trabajar</Badge>
        </a>
      </h1>
      <h2 class="opacity-80 text-xl md:text-2xl text-wrap">
        Un <span class="text-teal-600 dark:text-teal-400 font-semibold"
          >programador FrontEnd</span
        > italiano residente en Barcelona. Actualmente trabajo con <span
          class="text-teal-600 dark:text-teal-400 font-semibold"
        >
          React</span
        >.
      </h2>

      <nav class="flex flex-wrap gap-y-5 gap-x-6 mt-8">
        <SocialPill href="https://github.com/FabrizioContu">
          <GitHubIcon />
        </SocialPill>
        <SocialPill
          href="https://www.linkedin.com/in/fabrizio-contu-9b179b12a/"
        >
          <LinkedinIcon />
        </SocialPill>
        <SocialPill href="mailto:fab.contu@gmail.com">
          <MailIcon /> fab.contu@gmail.com
        </SocialPill>
        <SocialPill
          onclick="copyEmail()"
          title="Copiar fab.contu@gmail.com"
          aria-label="Copiar correo electrónico"
        >
          <CopyIcon />
        </SocialPill>

        <SocialPill
          href="CV.pdf"
          download="CV_Fabrizio_Contu.pdf"
          class="ml-4 px-3 py-2 text-white bg-teal-500 rounded-lg shadow hover:bg-teal-600 dark:hover:bg-teal-400 transition"
          aria-label="descargar CV"
        >
          Descargar CV
        </SocialPill>
      </nav>
      <div
        id="email-alert"
        role="alert"
        class="rounded-xl border border-gray-100 bg-white/90 p-4 hidden mt-6 mx-40"
      >
        <div class="flex items-start gap-4">
          <span class="text-green-600">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
              class="size-6"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
              ></path>
            </svg>
          </span>

          <div class="flex-1">
            <strong class="block font-medium text-gray-900">
              Correo <span
                class="text-teal-600 dark:text-teal-500 font-semibold"
                >fab.contu@gmail.com
              </span>copiado
            </strong>
          </div>

          <button
            class="text-gray-500 transition hover:text-gray-600"
            onclick="dismissAlert()"
          >
            <span class="sr-only">Dismiss popup</span>

            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
              class="size-6"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M6 18L18 6M6 6l12 12"></path>
            </svg>
          </button>
        </div>
      </div>
    </SectionContainer>
    <SectionContainer id="proyectos" aria-label="proyectos">
      <h2 class="text-3xl font-semibold mb-6 flex gap-x-3 items-center">
        <CodeIcon class="size-7" /> Proyectos
      </h2>
      <Projects />
    </SectionContainer>
    <SectionContainer id="contacto" arial-label="contacto">
      <ContactForm />
    </SectionContainer>
    <SectionContainer id="sobre-mi" aria-label="sobre-mi">
      <h2 class="text-3xl font-semibold mb-6 flex gap-x-3 items-center">
        <AboutIcon class="size-7" /> Sobre mí
      </h2>
      <AboutMe />
    </SectionContainer>
  </main>
</Layout>
<script is:inline>
  function copyEmail() {
    const email = "fab.contu@gmail.com";
    navigator.clipboard
      .writeText(email)
      .then(() => {
        const alert = document.getElementById("email-alert");
        alert.classList.remove("hidden");
        setTimeout(() => {
          alert.classList.add("hidden");
        }, 3000);
      })
      .catch((err) => {
        console.error("No se pudo copiar el correo", err);
      });
  }

  function dismissAlert() {
    const alert = document.getElementById("email-alert");
    alert.classList.add("hidden");
  }
</script>
